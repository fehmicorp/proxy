{
  "status": "active",
  "type": "stream",
  "module": "notifications",
  "route": "/ws/updates",
  "methods": ["WS"],
  "dbConf": "692d543f6d4eec947179d1cb",
  "security": {
    "authRequired": false,
    "jwt": {
      "enabled": true,
      "secretSource": "dynamic",
      "expire": "2h",
      "refresh": {
        "enabled": true,
        "expire": "7d"
      },
      "payloadMap": {
        "uid": "uidp",
        "name": "fullname",
        "roles": "roles"
      }
    },
    "cookie": {
      "enabled": true,
      "name": "accounts_token",
      "httpOnly": true,
      "secure": true,
      "sameSite": "strict",
      "path": "/"
    },
    "rateLimit": {
      "enabled": true,
      "max": 5,
      "window": "15m"
    }
  },
  "cors": {
    "enabled": true,
    "origin": [
      "https://accounts.fehmi.in"
    ],
    "methods": [
      "GET",
      "POST"
    ],
    "headers": [
      "Content-Type",
      "Authorization"
    ],
    "credentials": true,
    "maxAge": 86400
  },
  "headers": {
    "request": [
      "authorization",
      "x-device-id"
    ],
    "response": {
      "X-Powered-By": "Fehmi-API"
    }
  },
  "query": {
    "engine": "websocket",
    "protocol": "socket.io",
    "options": {
      "path": "/socket.io",
      "serveClient": false,
      "pingTimeout": 5000,
      "pingInterval": 10000
    },
    "events": {
      "onConnect": {
        "emit": "welcome",
        "message": "Connected to real-time stream"
      },
      "subscribe": {
        "channel": "user_:uidp",
        "authRequired": true
      },
      "resolver": {
        "engine": "sql",
        "type": "FETCH_LIST",
        "table": "notifications",
        "where": {
          "and": ["user_id", "is_read"]
        },
        "sorting": {
          "default": "created_at",
          "order": "DESC"
        }
      }
    },
    "response": {
      "shape": {
        "event": "data_update",
        "payload": "@result",
        "timestamp": "@meta.time"
      }
    }
  },
  "response": {
    "hide": [
      "passwordhash"
    ],
    "include": [
      "user",
      "jwt"
    ],
    "onFailure": {
      "message": "Invalid credentials"
    }
  },
  "audit": {
    "enabled": true,
    "collection": "auth_logs",
    "fields": [
      "ip",
      "userAgent",
      "time"
    ]
  },
  "limit": 1000,
  "createdAt": {
    "$date": "2025-07-22T10:00:00.000Z"
  }
}